@* 
Large picker to select the week we want to edit.
Created 16.10.2023
*@

<div class="row my-4 mx-0 justify-content-center">

    <div class="col-auto week-change-button" @onclick="SelectPreviousWeek">
        <p class="m-0 material-symbols-outlined align-self-center"> chevron_left </p>
    </div>

    <div class="col-auto px-3 mx-3 text-center week-change-center">


        <label for="week">Select week:</label>
        @* <input type="week" id="week" @bind="WeekFormatInput" /> *@
        <input type="week" id="week" @onchange="CheckChanged" />
    </div>

    <div class="col-auto week-change-button" @onclick="SelectNextWeek">
        <p class="m-0 material-symbols-outlined align-self-center"> chevron_right </p>
    </div>

</div>




@code {
    
    [Parameter]
    public int? CurrentWeek { get; set; }

    [Parameter]
    public EventCallback<int?> CurrentWeekChanged { get; set; }


    DateHandler dateHandler = new DateHandler();
    // used the onInitialize to assign calculated values to the matching variables, avoids data not being loaded into memory
    protected override void OnInitialized(){
        CurrentWeek = dateHandler.GetWeekOfYear();
        CurrentWeekChanged.InvokeAsync(CurrentWeek);

        WeekFormatInput = CurrentYear + "-W" + CurrentWeek;
    }


    private int CurrentYear = DateTime.Now.Year;
    private string? WeekFormatInput = null;


    public void SelectNextWeek() {
        CurrentWeek++;
        CurrentWeekChanged.InvokeAsync(CurrentWeek);
        WeekFormatInput = CurrentYear + "-W" + CurrentWeek;
    }

    public void SelectPreviousWeek() {
        CurrentWeek--;
        CurrentWeekChanged.InvokeAsync(CurrentWeek);
        WeekFormatInput = CurrentYear + "-W" + CurrentWeek;
    }


    // check if values have changed
    // not sure if
    private void CheckChanged() {
        Console.WriteLine("test");
    }
}